다음과 같이 구독결제 기능을 추가해주세요.
적절히 sub agent, Task agent를 활용하세요.

반드시 토스페이먼츠 연동 방법 및 best practice를 tosspayments mcp로 확인한 뒤, 구현detail/주의사항을 파악하고난 뒤에 그대로 구현하세요.

1. 주어진 요구사항을 자세히 파악해주세요.
2. 현재 데이터베이스 스키마를 확인하고, 요구사항을 반영하기위해 추가/수정해야할 내용을 설계해주세요. 기존 데이터를 보존해야합니다.
3. 설계된 내용을 바탕으로 데이터베이스를 변경하는 migration 파일을 생성해주세요.
4. 추가할 페이지별로 요구사항을 충족하는 미니멀한 UI 디자인을 고민해주세요. 기존 페이지들의 디자인을 따르도록 일관성을 유지하세요.
5. 추가할 페이지별로 구현해야할 백엔드/프론트엔드 모듈을 설계해주세요.
6. 각각의 페이지를 구현해주세요.
7. 이외 이미 구현된 페이지들에 대해서도 수정해야할 부분이 있다면 수정해주세요.

- claude.ai 스타일의 미니멀한 디자인을 구현하세요. UI/UX Design Guide를 참고하세요.
- 기존 코드베이스 구조 및 컨벤션을 따르면서, 버그가 없도록 구현하세요.

---

## 요구사항

### 페이지 추가

- 구독 관리
  - 현재 요금제 상태 표시
  - 현재 요금제에서 할 수 있는 action 표시
  - 현재 등록된 결제 수단 정보 표시
  - 지금까지의 결제 내역 표시

### 랜딩페이지 변경

### 사이드바 변경

- 사이드바 메뉴로 '구독 관리'를 추가하세요.
- 사이드바 하단에 구독상태를 표시하세요.(요금제, 잔여 생성 횟수, 다음결제일)

### 구독 정책

- 무료 가입 유저는 최초 3회만 글 생성이 가능합니다. (`gemini-2.5-flash` 사용)
- 무료 가입 유저는 구성원을 신규로 초대할 수 없습니다.
  - '초대 버튼'을 경고 아이콘과 함께 비활성화하고, hover/click 시 유료 요금제 구입이 필요하다는 메세지를 표시하세요.
- Pro 요금제 구독 고객은 월 20회까지 생성 가능합니다. (`gemini-2.5-pro` 사용)
- Pro 요금제는 월 결제만 지원하며, 29,900원입니다. (VAT 포함)
- Pro 요금제 취소 시, 다음 결제일까지 구독 상태가 유지됩니다.
- Pro 요금제 취소 시, 다음 결제일전에 취소상태를 취소할 수 있습니다.
- 구독 해지와 동시에 빌링키를 삭제합니다. 다시 구독하려면 SDK를 통한 재발급이 필요합니다.

## 수정된 글 작성 플로우

1. 사용자가 '새 글 작성' 페이지에 진입한다.
2. 사용자가 글 작성 정보를 입력하고 '글 작성 시작' 버튼을 클릭한다.
   - 상단에 잔여 횟수를 표시한다.
   - 잔여 횟수가 0인 경우, 글 작성 정보를 입력할 수 없으며 상단에 구독 페이지로 이동하라는 메시지를 표시한다.
3. 서버에서 해당 사용자의 잔여 횟수를 확인한다.
   - 잔여 횟수가 0인 경우, 사용자에게 구독 페이지로 이동하라는 메시지를 표시한다.
   - 잔여 횟수가 1회 이상인 경우, 다음 단계로 진행한다.
4. 서버에서 사용자의 잔여 횟수를 1 감소시킨다.
5. 글 작성 프로세스를 진행한다. 이 단계부터는 기존과 동일하다.

## 주의사항

- 결제 구현에 토스페이먼츠 SDK, API를 사용하세요.
- 정기결제 trigger에 Supabase cron을 사용하세요.

  **작동 플로우**

  1. [Supabase cron] 매일 02:00에 trigger, Next.js API 호출
  2. [Next.js API] 유효한 호출인지 검증
  3. [Next.js API] 오늘이 결제일인 구독건들 탐색 후 하나하나 결제API 호출
  4. 결제가 성공하면 테스트 횟수 추가 + 구독 기간 연장
  5. 결제가 실패하면 즉시 구독 해지
